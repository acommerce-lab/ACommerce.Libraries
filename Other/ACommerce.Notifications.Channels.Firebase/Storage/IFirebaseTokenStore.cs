using ACommerce.Notifications.Channels.Firebase.Models;

namespace ACommerce.Notifications.Channels.Firebase.Storage;

/// <summary>
/// ????? ?????? Firebase Tokens
/// </summary>
public interface IFirebaseTokenStore
{
	/// <summary>
	/// ??? ?? ????? Token ???????
	/// </summary>
	Task SaveTokenAsync(
		FirebaseDeviceToken deviceToken,
		CancellationToken cancellationToken = default);

	/// <summary>
	/// ?????? ??? ???? Tokens ?????? ???????
	/// </summary>
	Task<List<FirebaseDeviceToken>> GetUserTokensAsync(
		string userId,
		CancellationToken cancellationToken = default);

	/// <summary>
	/// ??? Token
	/// </summary>
	Task DeleteTokenAsync(
		string token,
		CancellationToken cancellationToken = default);

	/// <summary>
	/// ????? Token (??? ??? ???????)
	/// </summary>
	Task DeactivateTokenAsync(
		string token,
		CancellationToken cancellationToken = default);

	/// <summary>
	/// ?????? ??? ??? ??????? ?????? ???????
	/// </summary>
	Task<int> GetActiveDeviceCountAsync(
		string userId,
		CancellationToken cancellationToken = default);
}

