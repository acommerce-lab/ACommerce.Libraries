using System.ComponentModel.DataAnnotations.Schema;
using ACommerce.Transactions.Core.Enums;
using ACommerce.SharedKernel.Abstractions.Entities;

namespace ACommerce.Transactions.Core.Entities;

/// <summary>
/// ??? ???????
/// ?????? ??? ????? AttributeDefinition ???????!
/// </summary>
public class DocumentType : IBaseEntity
{
	public Guid Id { get; set; }
	public DateTime CreatedAt { get; set; }
	public DateTime? UpdatedAt { get; set; }
	public bool IsDeleted { get; set; }

	/// <summary>
	/// ??? ??? ??????? (?????? ??????? ??? ????? ???)
	/// </summary>
	public required string Name { get; set; }

	/// <summary>
	/// ????? ??????
	/// </summary>
	public required string Code { get; set; }

	/// <summary>
	/// ???????
	/// </summary>
	public DocumentCategory Category { get; set; }

	/// <summary>
	/// ?????
	/// </summary>
	public string? Description { get; set; }

	/// <summary>
	/// ????????
	/// </summary>
	public string? Icon { get; set; }

	/// <summary>
	/// ????? (????? ?? ???????)
	/// </summary>
	public string? ColorHex { get; set; }

	/// <summary>
	/// ??????? ?????? ???????
	/// ???: "INV" ????????? "PO" ?????? ??????
	/// </summary>
	public string? NumberPrefix { get; set; }

	/// <summary>
	/// ??? ??? ??????? (??? ???????)
	/// </summary>
	public int NumberLength { get; set; } = 6;

	/// <summary>
	/// ?? ????? ???????
	/// </summary>
	public bool RequiresApproval { get; set; }

	/// <summary>
	/// ?? ???? ??? ????????
	/// </summary>
	public bool AffectsInventory { get; set; }

	/// <summary>
	/// ?? ???? ??? ?????????
	/// </summary>
	public bool AffectsAccounting { get; set; }

	/// <summary>
	/// ?? ????
	/// </summary>
	public bool IsActive { get; set; } = true;

	/// <summary>
	/// ????? ?????
	/// </summary>
	public int SortOrder { get; set; }

	/// <summary>
	/// ??????? ??????
	/// </summary>
	[NotMapped]
	public Dictionary<string, string> Metadata { get; set; } = new();

	/// <summary>
	/// ???????? ??????? ??? ??? ?????
	/// </summary>
	public List<DocumentOperation> Operations { get; set; } = new();

	/// <summary>
	/// ???????? ????????? (??????? ???? ???? ??? ??? ?????)
	/// </summary>
	public List<DocumentTypeRelation> NextDocumentTypes { get; set; } = new();

	/// <summary>
	/// ???????? ????????? (??????? ???? ???? ??? ?????)
	/// </summary>
	public List<DocumentTypeRelation> PreviousDocumentTypes { get; set; } = new();

	/// <summary>
	/// ??????? ??????? ???? ????? (???????? Attributes!)
	/// ???: ????? ???? ??????? ??????? ????? ?? ?????? ???????
	/// </summary>
	public List<DocumentTypeAttribute> CustomAttributes { get; set; } = new();
}

