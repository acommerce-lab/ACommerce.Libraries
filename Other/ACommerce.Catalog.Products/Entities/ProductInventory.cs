using ACommerce.Catalog.Products.Enums;
using ACommerce.SharedKernel.Abstractions.Entities;
using System.ComponentModel.DataAnnotations.Schema;

namespace ACommerce.Catalog.Products.Entities;

/// <summary>
/// ????? ??????
/// </summary>
public class ProductInventory : IBaseEntity
{
	public Guid Id { get; set; }
	public DateTime CreatedAt { get; set; }
	public DateTime? UpdatedAt { get; set; }
	public bool IsDeleted { get; set; }

	/// <summary>
	/// ???? ??????
	/// </summary>
	public Guid ProductId { get; set; }
	public Product? Product { get; set; }

	/// <summary>
	/// ?????? ????????
	/// </summary>
	public decimal QuantityInStock { get; set; }

	/// <summary>
	/// ?????? ???????? (?? ???? ?? ????? ??? ????????)
	/// </summary>
	public decimal QuantityReserved { get; set; }

	/// <summary>
	/// ?????? ??????? ???????
	/// </summary>
	public decimal AvailableQuantity => QuantityInStock - QuantityReserved;

	/// <summary>
	/// ?? ??????? (??? ?????? ???? ????? ??? ???????)
	/// </summary>
	public decimal? LowStockThreshold { get; set; }

	/// <summary>
	/// ???? ???????
	/// </summary>
	public StockStatus Status { get; set; } = StockStatus.InStock;

	/// <summary>
	/// ?? ??? ???? ????????
	/// </summary>
	public bool TrackInventory { get; set; } = true;

	/// <summary>
	/// ?? ???? ????? ??? ???? ???????? (Backorder)
	/// </summary>
	public bool AllowBackorder { get; set; }

	/// <summary>
	/// ??????/????????
	/// </summary>
	public string? Warehouse { get; set; }

	/// <summary>
	/// ??? ????
	/// </summary>
	public string? ShelfNumber { get; set; }

	/// <summary>
	/// ?????? ?? ??????
	/// </summary>
	public string? Location { get; set; }

    /// <summary>
    /// ??????? ??????
    /// </summary>
    [NotMapped] public Dictionary<string, string> Metadata { get; set; } = new();
}

