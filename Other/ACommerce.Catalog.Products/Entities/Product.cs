using ACommerce.Catalog.Products.Enums;
using ACommerce.Catalog.Units.Entities;
using ACommerce.SharedKernel.Abstractions.Entities;
using System.ComponentModel.DataAnnotations.Schema;

namespace ACommerce.Catalog.Products.Entities;

/// <summary>
/// ?????? ???????
/// </summary>
public class Product : IBaseEntity
{
	public Guid Id { get; set; }
	public DateTime CreatedAt { get; set; }
	public DateTime? UpdatedAt { get; set; }
	public bool IsDeleted { get; set; }

	/// <summary>
	/// ??? ??????
	/// </summary>
	public required string Name { get; set; }

	/// <summary>
	/// ??? ?????? (SKU)
	/// </summary>
	public required string Sku { get; set; }

	/// <summary>
	/// ??? ??????
	/// </summary>
	public ProductType Type { get; set; } = ProductType.Simple;

	/// <summary>
	/// ???? ??????
	/// </summary>
	public ProductStatus Status { get; set; } = ProductStatus.Draft;

	/// <summary>
	/// ????? ??????
	/// </summary>
	public string? ShortDescription { get; set; }

	/// <summary>
	/// ????? ??????
	/// </summary>
	public string? LongDescription { get; set; }

	/// <summary>
	/// ???????? (UPC, EAN, ISBN, ???)
	/// </summary>
	public string? Barcode { get; set; }

	/// <summary>
	/// ????? (??????? ??????????)
	/// </summary>
	public decimal? Weight { get; set; }

	/// <summary>
	/// ???? ????? (????? ????? ?????? ???????)
	/// </summary>
	public Guid? WeightUnitId { get; set; }
	public Unit? WeightUnit { get; set; }

	/// <summary>
	/// ???????: ?????
	/// </summary>
	public decimal? Length { get; set; }

	/// <summary>
	/// ???????: ?????
	/// </summary>
	public decimal? Width { get; set; }

	/// <summary>
	/// ???????: ????????
	/// </summary>
	public decimal? Height { get; set; }

	/// <summary>
	/// ???? ??????? (????? ????? ?????? ???????)
	/// </summary>
	public Guid? DimensionUnitId { get; set; }
	public Unit? DimensionUnit { get; set; }

	/// <summary>
	/// ?????
	/// </summary>
	public List<string> Images { get; set; } = new();

	/// <summary>
	/// ?????? ????????
	/// </summary>
	public string? FeaturedImage { get; set; }

	/// <summary>
	/// ??????????
	/// </summary>
	public List<string> Videos { get; set; } = new();

	/// <summary>
	/// ????????? (PDF, DOC, ???)
	/// </summary>
	public List<string> Documents { get; set; } = new();

	/// <summary>
	/// ????? ?????
	/// </summary>
	public int SortOrder { get; set; }

	/// <summary>
	/// ?? ?????
	/// </summary>
	public bool IsFeatured { get; set; }

	/// <summary>
	/// ?? ?????
	/// </summary>
	public bool IsNew { get; set; }

	/// <summary>
	/// ????? ?????? "????"
	/// </summary>
	public DateTime? NewUntil { get; set; }

	/// <summary>
	/// ??????? ????????? (SEO)
	/// </summary>
	public List<string> Tags { get; set; } = new();

    /// <summary>
    /// ??????? ??????
    /// </summary>
    [NotMapped] public Dictionary<string, string> Metadata { get; set; } = new();

	// ====================================================================================
	// ????????
	// ====================================================================================

	/// <summary>
	/// ???? ?????? ???? (?????????)
	/// </summary>
	public Guid? ParentProductId { get; set; }
	public Product? ParentProduct { get; set; }

	/// <summary>
	/// ???????? ??????? (?????????)
	/// </summary>
	public List<Product> Variants { get; set; } = new();

	/// <summary>
	/// ??????
	/// </summary>
	public List<ProductCategory> Categories { get; set; } = new();

	/// <summary>
	/// ???????? ????????
	/// </summary>
	public List<ProductBrand> Brands { get; set; } = new();

	/// <summary>
	/// ????? ?????? (?????? ??????? ???)
	/// </summary>
	public List<ProductAttribute> Attributes { get; set; } = new();

	/// <summary>
	/// ??????? (?????? ??????? ????? ??????)
	/// </summary>
	public List<ProductPrice> Prices { get; set; } = new();

	/// <summary>
	/// ???????
	/// </summary>
	public ProductInventory? Inventory { get; set; }

	/// <summary>
	/// ???????? ???????? (Related Products)
	/// </summary>
	public List<ProductRelation> RelatedProducts { get; set; } = new();

	/// <summary>
	/// ?????????
	/// </summary>
	public List<ProductReview> Reviews { get; set; } = new();
}

