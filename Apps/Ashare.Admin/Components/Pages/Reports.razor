@page "/reports"
@inject AdminApiService ApiService

<div class="reports-page">
    <div class="page-header">
        <div class="search-filters">
            <SfDropDownList TItem="string" TValue="string" Placeholder="Ù†ÙˆØ¹ Ø§Ù„ØªÙ‚Ø±ÙŠØ±" Width="200px" 
                            DataSource="@ReportTypes" @bind-Value="SelectedReportType" />
            <SfDateRangePicker TValue="DateTime?" Placeholder="Ù†Ø·Ø§Ù‚ Ø§Ù„ØªØ§Ø±ÙŠØ®" Width="300px" />
            <SfButton CssClass="e-primary" OnClick="GenerateReport">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ±</SfButton>
            <SfButton CssClass="e-outline" IconCss="e-icons e-download">ØªØµØ¯ÙŠØ± PDF</SfButton>
        </div>
    </div>

    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon primary">ğŸ’µ</div>
            <div class="stat-content">
                <h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</h3>
                <div class="value">125,000 Ø±.Ø³</div>
                <div class="change positive">+15% Ù…Ù† Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù…Ø§Ø¶ÙŠ</div>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon success">ğŸ“¦</div>
            <div class="stat-content">
                <h3>Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©</h3>
                <div class="value">387</div>
                <div class="change positive">+12% Ù…Ù† Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù…Ø§Ø¶ÙŠ</div>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon warning">ğŸ‘¥</div>
            <div class="stat-content">
                <h3>Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¬Ø¯Ø¯</h3>
                <div class="value">89</div>
                <div class="change positive">+8% Ù…Ù† Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù…Ø§Ø¶ÙŠ</div>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon danger">â­</div>
            <div class="stat-content">
                <h3>Ù…ØªÙˆØ³Ø· Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</h3>
                <div class="value">4.7</div>
                <div class="change positive">+0.2 Ù…Ù† Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù…Ø§Ø¶ÙŠ</div>
            </div>
        </div>
    </div>

    <div class="content-grid">
        <div class="card">
            <div class="card-header">
                <h2>ğŸ“Š Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ø´Ù‡Ø±</h2>
            </div>
            <div class="card-body">
                <SfChart Height="350px">
                    <ChartPrimaryXAxis ValueType="Syncfusion.Blazor.Charts.ValueType.Category" />
                    <ChartPrimaryYAxis LabelFormat="{value} Ø±.Ø³" />
                    <ChartSeriesCollection>
                        <ChartSeries DataSource="@SalesData" 
                                     XName="Label" 
                                     YName="Value" 
                                     Type="ChartSeriesType.SplineArea"
                                     Fill="#2563eb"
                                     Opacity="0.5">
                            <ChartMarker Visible="true" Height="10" Width="10" />
                        </ChartSeries>
                    </ChartSeriesCollection>
                    <ChartTooltipSettings Enable="true" />
                </SfChart>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h2>ğŸ¢ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø©</h2>
            </div>
            <div class="card-body">
                <SfAccumulationChart Height="350px">
                    <AccumulationChartSeriesCollection>
                        <AccumulationChartSeries DataSource="@CategoryData" 
                                                  XName="Label" 
                                                  YName="Value"
                                                  InnerRadius="40%">
                            <AccumulationDataLabelSettings Visible="true" Name="Label" Position="AccumulationLabelPosition.Outside" />
                        </AccumulationChartSeries>
                    </AccumulationChartSeriesCollection>
                    <AccumulationChartTooltipSettings Enable="true" />
                    <AccumulationChartLegendSettings Visible="true" Position="LegendPosition.Bottom" />
                </SfAccumulationChart>
            </div>
        </div>
    </div>

    <div class="card" style="margin-top: 24px;">
        <div class="card-header">
            <h2>ğŸ† Ø£ÙØ¶Ù„ Ø§Ù„Ø¨Ø§Ø¦Ø¹ÙŠÙ†</h2>
        </div>
        <div class="card-body">
            <SfGrid DataSource="@TopVendors" AllowPaging="false">
                <GridColumns>
                    <GridColumn Field="Rank" HeaderText="#" Width="60" />
                    <GridColumn Field="Name" HeaderText="Ø§Ù„Ø¨Ø§Ø¦Ø¹" Width="200" />
                    <GridColumn Field="TotalSales" HeaderText="Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª" Width="150" Format="N0" />
                    <GridColumn Field="OrderCount" HeaderText="Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª" Width="120" />
                    <GridColumn Field="Rating" HeaderText="Ø§Ù„ØªÙ‚ÙŠÙŠÙ…" Width="100">
                        <Template>
                            @{
                                var vendor = (context as TopVendorDto);
                                <span>â­ @vendor?.Rating</span>
                            }
                        </Template>
                    </GridColumn>
                </GridColumns>
            </SfGrid>
        </div>
    </div>
</div>

@code {
    private string SelectedReportType { get; set; } = "Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª";
    private List<string> ReportTypes = new() { "Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª", "Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†", "Ø§Ù„Ø¹Ø±ÙˆØ¶", "Ø§Ù„Ø¨Ø§Ø¦Ø¹ÙŠÙ†" };

    private List<ChartDataPoint> SalesData = new()
    {
        new() { Label = "ÙŠÙ†Ø§ÙŠØ±", Value = 15000 },
        new() { Label = "ÙØ¨Ø±Ø§ÙŠØ±", Value = 18000 },
        new() { Label = "Ù…Ø§Ø±Ø³", Value = 22000 },
        new() { Label = "Ø£Ø¨Ø±ÙŠÙ„", Value = 19000 },
        new() { Label = "Ù…Ø§ÙŠÙˆ", Value = 25000 },
        new() { Label = "ÙŠÙˆÙ†ÙŠÙˆ", Value = 28000 },
    };

    private List<ChartDataPoint> CategoryData = new()
    {
        new() { Label = "Ù…Ø³Ø§Ø­Ø§Øª Ø¹Ù…Ù„", Value = 35 },
        new() { Label = "Ù‚Ø§Ø¹Ø§Øª Ø§Ø¬ØªÙ…Ø§Ø¹Ø§Øª", Value = 25 },
        new() { Label = "Ù…ÙƒØ§ØªØ¨ Ø®Ø§ØµØ©", Value = 20 },
        new() { Label = "Ø§Ø³ØªÙˆØ¯ÙŠÙˆÙ‡Ø§Øª", Value = 12 },
        new() { Label = "ÙØ¹Ø§Ù„ÙŠØ§Øª", Value = 8 },
    };

    private List<TopVendorDto> TopVendors = new()
    {
        new() { Rank = 1, Name = "Ø´Ø±ÙƒØ© Ø§Ù„Ù…ÙƒØ§ØªØ¨ Ø§Ù„Ø°Ù‡Ø¨ÙŠØ©", TotalSales = 45000, OrderCount = 89, Rating = 4.9 },
        new() { Rank = 2, Name = "Ù…Ø±ÙƒØ² Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„Ù…ØªÙ…ÙŠØ²", TotalSales = 38000, OrderCount = 67, Rating = 4.8 },
        new() { Rank = 3, Name = "Ù…ÙƒØ§ØªØ¨ Ø§Ù„Ø®Ù„ÙŠØ¬", TotalSales = 32000, OrderCount = 54, Rating = 4.7 },
        new() { Rank = 4, Name = "Ø§Ø³ØªÙˆØ¯ÙŠÙˆ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹", TotalSales = 28000, OrderCount = 45, Rating = 4.6 },
        new() { Rank = 5, Name = "Ù‚Ø§Ø¹Ø§Øª Ø§Ù„Ù…Ù…Ù„ÙƒØ©", TotalSales = 25000, OrderCount = 42, Rating = 4.5 },
    };

    private void GenerateReport()
    {
    }

    public class TopVendorDto
    {
        public int Rank { get; set; }
        public string Name { get; set; } = string.Empty;
        public decimal TotalSales { get; set; }
        public int OrderCount { get; set; }
        public double Rating { get; set; }
    }
}
