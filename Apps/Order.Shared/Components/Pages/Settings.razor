@page "/settings"
@inject AppSettingsService SettingsService
@inject AuthStateService AuthState
@inject NavigationManager Navigation
@inject IJSRuntime JS

<div class="settings-page @(SettingsService.Settings.Theme == "dark" ? "dark-theme" : "")">
    <header class="settings-header">
        <button class="btn-back" @onclick="GoBack">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 18l6-6-6-6"/>
            </svg>
        </button>
        <h1>ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™</h1>
        <div class="header-spacer"></div>
    </header>

    <div class="settings-content">
        <!-- Appearance Section -->
        <section class="settings-section">
            <h2 class="section-title">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="5"/>
                    <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                </svg>
                <span>ÿßŸÑŸÖÿ∏Ÿáÿ±</span>
            </h2>

            <div class="theme-options">
                <button class="theme-option @(SettingsService.Settings.Theme == "light" ? "active" : "")"
                        @onclick='() => SetTheme("light")'>
                    <div class="theme-preview light-preview">
                        <div class="preview-header"></div>
                        <div class="preview-content">
                            <div class="preview-line"></div>
                            <div class="preview-line short"></div>
                        </div>
                    </div>
                    <span class="theme-label">ŸÅÿßÿ™ÿ≠</span>
                    @if (SettingsService.Settings.Theme == "light")
                    {
                        <div class="check-badge">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="white">
                                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                            </svg>
                        </div>
                    }
                </button>

                <button class="theme-option @(SettingsService.Settings.Theme == "dark" ? "active" : "")"
                        @onclick='() => SetTheme("dark")'>
                    <div class="theme-preview dark-preview">
                        <div class="preview-header"></div>
                        <div class="preview-content">
                            <div class="preview-line"></div>
                            <div class="preview-line short"></div>
                        </div>
                    </div>
                    <span class="theme-label">ÿØÿßŸÉŸÜ</span>
                    @if (SettingsService.Settings.Theme == "dark")
                    {
                        <div class="check-badge">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="white">
                                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                            </svg>
                        </div>
                    }
                </button>

                <button class="theme-option @(SettingsService.Settings.Theme == "system" ? "active" : "")"
                        @onclick='() => SetTheme("system")'>
                    <div class="theme-preview system-preview">
                        <div class="preview-split">
                            <div class="light-half"></div>
                            <div class="dark-half"></div>
                        </div>
                    </div>
                    <span class="theme-label">ÿ™ŸÑŸÇÿßÿ¶Ÿä</span>
                    @if (SettingsService.Settings.Theme == "system")
                    {
                        <div class="check-badge">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="white">
                                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                            </svg>
                        </div>
                    }
                </button>
            </div>
        </section>

        <!-- Language Section -->
        <section class="settings-section">
            <h2 class="section-title">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <path d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"/>
                </svg>
                <span>ÿßŸÑŸÑÿ∫ÿ©</span>
            </h2>

            <div class="language-options">
                <button class="language-option @(SettingsService.Settings.Language == "ar" ? "active" : "")"
                        @onclick='() => SetLanguage("ar")'>
                    <span class="lang-flag">üá∏üá¶</span>
                    <span class="lang-name">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</span>
                    @if (SettingsService.Settings.Language == "ar")
                    {
                        <svg class="check-icon" width="20" height="20" viewBox="0 0 24 24" fill="#F97316">
                            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                        </svg>
                    }
                </button>

                <button class="language-option @(SettingsService.Settings.Language == "en" ? "active" : "")"
                        @onclick='() => SetLanguage("en")'>
                    <span class="lang-flag">üá∫üá∏</span>
                    <span class="lang-name">English</span>
                    @if (SettingsService.Settings.Language == "en")
                    {
                        <svg class="check-icon" width="20" height="20" viewBox="0 0 24 24" fill="#F97316">
                            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                        </svg>
                    }
                </button>
            </div>
        </section>

        <!-- Notifications Section -->
        <section class="settings-section">
            <h2 class="section-title">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                    <path d="M13.73 21a2 2 0 01-3.46 0"/>
                </svg>
                <span>ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™</span>
            </h2>

            <div class="toggle-list">
                <div class="toggle-item">
                    <div class="toggle-info">
                        <span class="toggle-label">ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™</span>
                        <span class="toggle-desc">ÿßÿ≥ÿ™ŸÑŸÖ ÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ÿπŸÜ ÿ≠ÿßŸÑÿ© ÿ∑ŸÑÿ®ÿßÿ™ŸÉ</span>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" checked="@SettingsService.Settings.NotificationsEnabled"
                               @onchange="e => ToggleNotifications((bool)(e.Value ?? false))" />
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <div class="toggle-item @(!SettingsService.Settings.NotificationsEnabled ? "disabled" : "")">
                    <div class="toggle-info">
                        <span class="toggle-label">ÿßŸÑÿµŸàÿ™</span>
                        <span class="toggle-desc">ÿ™ÿ¥ÿ∫ŸäŸÑ ÿµŸàÿ™ ÿπŸÜÿØ ŸàÿµŸàŸÑ ÿ•ÿ¥ÿπÿßÿ±</span>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" checked="@SettingsService.Settings.SoundEnabled"
                               disabled="@(!SettingsService.Settings.NotificationsEnabled)"
                               @onchange="e => ToggleSound((bool)(e.Value ?? false))" />
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <div class="toggle-item @(!SettingsService.Settings.NotificationsEnabled ? "disabled" : "")">
                    <div class="toggle-info">
                        <span class="toggle-label">ÿßŸÑÿßŸáÿ™ÿ≤ÿßÿ≤</span>
                        <span class="toggle-desc">ÿßŸáÿ™ÿ≤ÿßÿ≤ ÿßŸÑÿ¨Ÿáÿßÿ≤ ÿπŸÜÿØ ŸàÿµŸàŸÑ ÿ•ÿ¥ÿπÿßÿ±</span>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" checked="@SettingsService.Settings.VibrationEnabled"
                               disabled="@(!SettingsService.Settings.NotificationsEnabled)"
                               @onchange="e => ToggleVibration((bool)(e.Value ?? false))" />
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            </div>
        </section>

        <!-- Saved Info Section -->
        <section class="settings-section">
            <h2 class="section-title">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"/>
                    <polyline points="17,21 17,13 7,13 7,21"/>
                    <polyline points="7,3 7,8 15,8"/>
                </svg>
                <span>ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÖÿ≠ŸÅŸàÿ∏ÿ©</span>
            </h2>

            <div class="saved-info-list">
                <button class="saved-info-item" @onclick="EditDefaultLocation">
                    <div class="info-icon location">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/>
                            <circle cx="12" cy="10" r="3"/>
                        </svg>
                    </div>
                    <div class="info-content">
                        <span class="info-label">ÿßŸÑŸÖŸàŸÇÿπ ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿä</span>
                        <span class="info-value">@(SettingsService.Settings.DefaultLocation?.Name ?? "ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ")</span>
                    </div>
                    <svg class="arrow-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="15,18 9,12 15,6"/>
                    </svg>
                </button>

                <button class="saved-info-item" @onclick="EditDefaultCar">
                    <div class="info-icon car">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M5 17h14v-5H5v5zm2.5 1.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm9 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM5 12l2-5h10l2 5"/>
                        </svg>
                    </div>
                    <div class="info-content">
                        <span class="info-label">ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ≥Ÿäÿßÿ±ÿ©</span>
                        <span class="info-value">@GetCarInfoDisplay()</span>
                    </div>
                    <svg class="arrow-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="15,18 9,12 15,6"/>
                    </svg>
                </button>
            </div>
        </section>

        <!-- Support Section -->
        <section class="settings-section">
            <h2 class="section-title">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"/>
                    <line x1="12" y1="17" x2="12.01" y2="17"/>
                </svg>
                <span>ÿßŸÑÿØÿπŸÖ ŸàÿßŸÑŸÖÿ≥ÿßÿπÿØÿ©</span>
            </h2>

            <div class="support-list">
                <button class="support-item" @onclick="OpenHelp">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"/>
                        <line x1="12" y1="17" x2="12.01" y2="17"/>
                    </svg>
                    <span>ÿßŸÑŸÖÿ≥ÿßÿπÿØÿ© ŸàÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ© ÿßŸÑÿ¥ÿßÿ¶ÿπÿ©</span>
                </button>

                <button class="support-item" @onclick="ContactSupport">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 11.5a8.38 8.38 0 01-.9 3.8 8.5 8.5 0 01-7.6 4.7 8.38 8.38 0 01-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 01-.9-3.8 8.5 8.5 0 014.7-7.6 8.38 8.38 0 013.8-.9h.5a8.48 8.48 0 018 8v.5z"/>
                    </svg>
                    <span>ÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß</span>
                </button>

                <button class="support-item" @onclick="OpenPrivacy">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                        <path d="M7 11V7a5 5 0 0110 0v4"/>
                    </svg>
                    <span>ÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿÆÿµŸàÿµŸäÿ©</span>
                </button>

                <button class="support-item" @onclick="OpenTerms">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
                        <polyline points="14,2 14,8 20,8"/>
                        <line x1="16" y1="13" x2="8" y2="13"/>
                        <line x1="16" y1="17" x2="8" y2="17"/>
                    </svg>
                    <span>ÿßŸÑÿ¥ÿ±Ÿàÿ∑ ŸàÿßŸÑÿ£ÿ≠ŸÉÿßŸÖ</span>
                </button>
            </div>
        </section>

        <!-- App Info -->
        <div class="app-info">
            <div class="app-logo">
                <span class="logo-icon">üõí</span>
                <span class="logo-text">ÿßŸàÿ±ÿØÿ±</span>
            </div>
            <span class="app-version">ÿßŸÑÿ•ÿµÿØÿßÿ± 1.0.0</span>
        </div>

        @if (AuthState.IsAuthenticated)
        {
            <button class="btn-logout" @onclick="Logout">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"/>
                    <polyline points="16,17 21,12 16,7"/>
                    <line x1="21" y1="12" x2="9" y2="12"/>
                </svg>
                <span>ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨</span>
            </button>
        }
    </div>
</div>

@code {
    protected override async Task OnInitializedAsync()
    {
        await SettingsService.InitializeAsync();
    }

    private async Task SetTheme(string theme)
    {
        await SettingsService.SetThemeAsync(theme);
        await ApplyTheme(theme);
    }

    private async Task SetLanguage(string language)
    {
        await SettingsService.SetLanguageAsync(language);
        // In a real app, this would trigger a full UI refresh with the new language
    }

    private async Task ApplyTheme(string theme)
    {
        var isDark = theme == "dark" || (theme == "system" && await IsSystemDark());
        await JS.InvokeVoidAsync("eval", $"document.documentElement.classList.toggle('dark-theme', {isDark.ToString().ToLower()})");
    }

    private async Task<bool> IsSystemDark()
    {
        try
        {
            return await JS.InvokeAsync<bool>("eval", "window.matchMedia('(prefers-color-scheme: dark)').matches");
        }
        catch
        {
            return false;
        }
    }

    private async Task ToggleNotifications(bool enabled)
    {
        await SettingsService.SetNotificationsEnabledAsync(enabled);
    }

    private async Task ToggleSound(bool enabled)
    {
        var settings = SettingsService.Settings;
        settings.SoundEnabled = enabled;
        await SettingsService.UpdateSettingsAsync(settings);
    }

    private async Task ToggleVibration(bool enabled)
    {
        var settings = SettingsService.Settings;
        settings.VibrationEnabled = enabled;
        await SettingsService.UpdateSettingsAsync(settings);
    }

    private string GetCarInfoDisplay()
    {
        var car = SettingsService.Settings.DefaultCarInfo;
        if (car == null || string.IsNullOrEmpty(car.CarModel))
            return "ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ";
        return $"{car.CarModel} - {car.CarColor}";
    }

    private void EditDefaultLocation()
    {
        Navigation.NavigateTo("/location?returnUrl=/settings");
    }

    private void EditDefaultCar()
    {
        // Could open a modal or navigate to a car info page
    }

    private void OpenHelp()
    {
        Navigation.NavigateTo("/help");
    }

    private void ContactSupport()
    {
        Navigation.NavigateTo("/chat/support");
    }

    private void OpenPrivacy()
    {
        // Open privacy policy
    }

    private void OpenTerms()
    {
        // Open terms
    }

    private async Task Logout()
    {
        await AuthState.LogoutAsync();
        Navigation.NavigateTo("/login");
    }

    private void GoBack()
    {
        Navigation.NavigateTo("/profile");
    }
}

<style>
    .settings-page {
        min-height: 100vh;
        background: linear-gradient(180deg, #F8FAFC 0%, #F1F5F9 100%);
        padding-bottom: 100px;
    }

    .settings-page.dark-theme {
        background: linear-gradient(180deg, #1E293B 0%, #0F172A 100%);
    }

    .settings-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 16px 20px;
        background: white;
        border-bottom: 1px solid #E2E8F0;
        position: sticky;
        top: 0;
        z-index: 100;
    }

    .dark-theme .settings-header {
        background: #1E293B;
        border-color: #334155;
    }

    .settings-header h1 {
        font-size: 18px;
        font-weight: 700;
        margin: 0;
        color: #1E293B;
    }

    .dark-theme .settings-header h1 {
        color: #F8FAFC;
    }

    .btn-back {
        width: 40px;
        height: 40px;
        border-radius: 12px;
        background: #F1F5F9;
        border: none;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #64748B;
        cursor: pointer;
    }

    .dark-theme .btn-back {
        background: #334155;
        color: #94A3B8;
    }

    .header-spacer {
        width: 40px;
    }

    .settings-content {
        padding: 20px;
    }

    .settings-section {
        background: white;
        border-radius: 16px;
        padding: 20px;
        margin-bottom: 16px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }

    .dark-theme .settings-section {
        background: #1E293B;
    }

    .section-title {
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 16px;
        font-weight: 600;
        color: #1E293B;
        margin: 0 0 16px;
    }

    .dark-theme .section-title {
        color: #F8FAFC;
    }

    .section-title svg {
        color: #64748B;
    }

    /* Theme Options */
    .theme-options {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 12px;
    }

    .theme-option {
        position: relative;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
        padding: 12px;
        background: #F8FAFC;
        border: 2px solid #E2E8F0;
        border-radius: 14px;
        cursor: pointer;
        transition: all 0.2s;
    }

    .dark-theme .theme-option {
        background: #0F172A;
        border-color: #334155;
    }

    .theme-option.active {
        border-color: #F97316;
        background: #FFF7ED;
    }

    .dark-theme .theme-option.active {
        background: rgba(249, 115, 22, 0.1);
    }

    .theme-preview {
        width: 60px;
        height: 44px;
        border-radius: 8px;
        overflow: hidden;
        border: 1px solid #E2E8F0;
    }

    .light-preview {
        background: white;
    }

    .light-preview .preview-header {
        height: 10px;
        background: #F97316;
    }

    .light-preview .preview-content {
        padding: 6px;
    }

    .light-preview .preview-line {
        height: 4px;
        background: #E2E8F0;
        border-radius: 2px;
        margin-bottom: 4px;
    }

    .light-preview .preview-line.short {
        width: 60%;
    }

    .dark-preview {
        background: #1E293B;
    }

    .dark-preview .preview-header {
        height: 10px;
        background: #F97316;
    }

    .dark-preview .preview-content {
        padding: 6px;
    }

    .dark-preview .preview-line {
        height: 4px;
        background: #334155;
        border-radius: 2px;
        margin-bottom: 4px;
    }

    .dark-preview .preview-line.short {
        width: 60%;
    }

    .system-preview {
        display: flex;
        overflow: hidden;
    }

    .preview-split {
        display: flex;
        width: 100%;
        height: 100%;
    }

    .light-half {
        flex: 1;
        background: white;
    }

    .dark-half {
        flex: 1;
        background: #1E293B;
    }

    .theme-label {
        font-size: 13px;
        font-weight: 500;
        color: #64748B;
    }

    .dark-theme .theme-label {
        color: #94A3B8;
    }

    .check-badge {
        position: absolute;
        top: 8px;
        left: 8px;
        width: 22px;
        height: 22px;
        background: #F97316;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    /* Language Options */
    .language-options {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .language-option {
        display: flex;
        align-items: center;
        gap: 14px;
        padding: 14px 16px;
        background: #F8FAFC;
        border: 2px solid #E2E8F0;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.2s;
    }

    .dark-theme .language-option {
        background: #0F172A;
        border-color: #334155;
    }

    .language-option.active {
        border-color: #F97316;
        background: #FFF7ED;
    }

    .dark-theme .language-option.active {
        background: rgba(249, 115, 22, 0.1);
    }

    .lang-flag {
        font-size: 24px;
    }

    .lang-name {
        flex: 1;
        font-size: 15px;
        font-weight: 500;
        color: #1E293B;
        text-align: start;
    }

    .dark-theme .lang-name {
        color: #F8FAFC;
    }

    .check-icon {
        margin-right: auto;
    }

    /* Toggle Items */
    .toggle-list {
        display: flex;
        flex-direction: column;
        gap: 4px;
    }

    .toggle-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 14px 0;
        border-bottom: 1px solid #F1F5F9;
    }

    .dark-theme .toggle-item {
        border-color: #334155;
    }

    .toggle-item:last-child {
        border-bottom: none;
    }

    .toggle-item.disabled {
        opacity: 0.5;
    }

    .toggle-info {
        display: flex;
        flex-direction: column;
        gap: 2px;
    }

    .toggle-label {
        font-size: 15px;
        font-weight: 500;
        color: #1E293B;
    }

    .dark-theme .toggle-label {
        color: #F8FAFC;
    }

    .toggle-desc {
        font-size: 12px;
        color: #64748B;
    }

    .toggle-switch {
        position: relative;
        display: inline-block;
        width: 52px;
        height: 28px;
    }

    .toggle-switch input {
        opacity: 0;
        width: 0;
        height: 0;
    }

    .toggle-slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: #CBD5E1;
        border-radius: 28px;
        transition: 0.3s;
    }

    .toggle-slider::before {
        position: absolute;
        content: "";
        height: 22px;
        width: 22px;
        left: 3px;
        bottom: 3px;
        background: white;
        border-radius: 50%;
        transition: 0.3s;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .toggle-switch input:checked + .toggle-slider {
        background: #F97316;
    }

    .toggle-switch input:checked + .toggle-slider::before {
        transform: translateX(24px);
    }

    .toggle-switch input:disabled + .toggle-slider {
        opacity: 0.5;
        cursor: not-allowed;
    }

    /* Saved Info */
    .saved-info-list {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .saved-info-item {
        display: flex;
        align-items: center;
        gap: 14px;
        padding: 14px 16px;
        background: #F8FAFC;
        border: none;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.2s;
        width: 100%;
        text-align: start;
    }

    .dark-theme .saved-info-item {
        background: #0F172A;
    }

    .saved-info-item:active {
        transform: scale(0.98);
    }

    .info-icon {
        width: 44px;
        height: 44px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .info-icon.location {
        background: linear-gradient(135deg, #DCFCE7 0%, #BBF7D0 100%);
        color: #16A34A;
    }

    .info-icon.car {
        background: linear-gradient(135deg, #DBEAFE 0%, #BFDBFE 100%);
        color: #2563EB;
    }

    .info-content {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 2px;
    }

    .info-label {
        font-size: 14px;
        font-weight: 500;
        color: #1E293B;
    }

    .dark-theme .info-label {
        color: #F8FAFC;
    }

    .info-value {
        font-size: 12px;
        color: #64748B;
    }

    .arrow-icon {
        color: #94A3B8;
    }

    /* Support List */
    .support-list {
        display: flex;
        flex-direction: column;
    }

    .support-item {
        display: flex;
        align-items: center;
        gap: 14px;
        padding: 14px 0;
        background: none;
        border: none;
        border-bottom: 1px solid #F1F5F9;
        cursor: pointer;
        font-size: 15px;
        color: #1E293B;
        width: 100%;
        text-align: start;
    }

    .dark-theme .support-item {
        border-color: #334155;
        color: #F8FAFC;
    }

    .support-item:last-child {
        border-bottom: none;
    }

    .support-item svg {
        color: #64748B;
    }

    /* App Info */
    .app-info {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
        padding: 24px;
    }

    .app-logo {
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .logo-icon {
        font-size: 32px;
    }

    .logo-text {
        font-size: 24px;
        font-weight: 700;
        color: #F97316;
    }

    .app-version {
        font-size: 13px;
        color: #94A3B8;
    }

    /* Logout Button */
    .btn-logout {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        width: 100%;
        padding: 16px;
        background: #FEE2E2;
        color: #DC2626;
        border: none;
        border-radius: 14px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
        margin-top: 8px;
    }

    .btn-logout:active {
        transform: scale(0.98);
        background: #FECACA;
    }
</style>
