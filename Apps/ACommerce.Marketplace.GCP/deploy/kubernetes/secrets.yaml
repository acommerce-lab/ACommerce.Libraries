# =============================================================================
# ACommerce Marketplace API - Secrets
# Sensitive configuration values - DO NOT COMMIT WITH REAL VALUES
# =============================================================================
#
# IMPORTANT: This is a TEMPLATE file.
# - In production, use GCP Secret Manager or Sealed Secrets
# - Values below are base64 encoded placeholders
# - Replace with actual base64-encoded values before applying
#
# To encode a value: echo -n 'your-value' | base64
# To decode a value: echo 'encoded-value' | base64 -d
#
# =============================================================================
apiVersion: v1
kind: Secret
metadata:
  name: acommerce-marketplace-secrets
  labels:
    app: acommerce-marketplace
    app.kubernetes.io/name: acommerce-marketplace
    app.kubernetes.io/component: api
type: Opaque
data:
  # ==========================================================================
  # DATABASE CREDENTIALS
  # ==========================================================================

  # Database Host (e.g., Cloud SQL private IP or Unix socket path)
  # Placeholder: /cloudsql/project:region:instance
  DB_HOST: L2Nsb3Vkc3FsL3Byb2plY3Q6cmVnaW9uOmluc3RhbmNl

  # Database Username
  # Placeholder: postgres
  DB_USER: cG9zdGdyZXM=

  # Database Password
  # Placeholder: CHANGE_ME_IN_PRODUCTION
  DB_PASSWORD: Q0hBTkdFX01FX0lOX1BST0RVQ1RJT04=

  # Full connection string (alternative to individual components)
  # Placeholder: Host=/cloudsql/project:region:instance;Database=acommerce;Username=postgres;Password=CHANGE_ME
  # DATABASE_CONNECTION_STRING: <base64-encoded-connection-string>

  # ==========================================================================
  # AUTHENTICATION SECRETS
  # ==========================================================================

  # JWT Secret Key (minimum 32 characters)
  # Placeholder: YourSuperSecretKeyThatIsAtLeast32CharactersLong!
  JWT__SecretKey: WW91clN1cGVyU2VjcmV0S2V5VGhhdElzQXRMZWFzdDMyQ2hhcmFjdGVyc0xvbmch

  # ==========================================================================
  # REDIS CREDENTIALS
  # ==========================================================================

  # Redis Connection String
  # Placeholder: redis-master:6379
  REDIS_CONNECTION_STRING: cmVkaXMtbWFzdGVyOjYzNzk=

  # ==========================================================================
  # GCP MARKETPLACE BILLING
  # ==========================================================================

  # GCP Project ID
  # Placeholder: my-gcp-project
  GCP_PROJECT_ID: bXktZ2NwLXByb2plY3Q=

  # GCP Entitlement ID (injected by Marketplace at deployment)
  # Placeholder: entitlement-id
  GCP_ENTITLEMENT_ID: ZW50aXRsZW1lbnQtaWQ=

  # GCP Consumer ID (injected by Marketplace at deployment)
  # Placeholder: projects/customer-project
  GCP_CONSUMER_ID: cHJvamVjdHMvY3VzdG9tZXItcHJvamVjdA==

  # ==========================================================================
  # FILE STORAGE
  # ==========================================================================

  # Google Cloud Storage Bucket Name
  # Placeholder: acommerce-files
  Files__Storage__GoogleCloud__BucketName: YWNvbW1lcmNlLWZpbGVz

---
# =============================================================================
# Service Account for GCP Integration (Workload Identity)
# =============================================================================
apiVersion: v1
kind: Secret
metadata:
  name: acommerce-gcp-sa-key
  labels:
    app: acommerce-marketplace
    app.kubernetes.io/name: acommerce-marketplace
    app.kubernetes.io/component: api
type: Opaque
data:
  # GCP Service Account Key JSON (for non-Workload Identity environments)
  # In GKE with Workload Identity, this is not needed
  # Placeholder: {}
  sa-key.json: e30=
