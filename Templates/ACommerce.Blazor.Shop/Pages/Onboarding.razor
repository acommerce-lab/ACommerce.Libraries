@page "/onboarding"
@inject NavigationManager Navigation
@inject IJSRuntime JS

<PageTitle>Ù…Ø±Ø­Ø¨Ø§Ù‹ - Welcome</PageTitle>

<div class="onboarding-page">
	<div class="onboarding-container">
		<!-- Progress Indicators -->
		<div class="progress-dots">
			@for (int i = 0; i < slides.Count; i++)
			{
				<span class="dot @(currentSlide == i ? "active" : "")"
					  @onclick="() => GoToSlide(i)"></span>
			}
		</div>

		<!-- Slides -->
		<div class="slides-container">
			@if (currentSlide == 0)
			{
				<div class="slide slide-1">
					<div class="slide-icon">ğŸ›ï¸</div>
					<h1>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…ØªØ¬Ø±Ù†Ø§</h1>
					<p>Ø£ÙØ¶Ù„ ØªØ¬Ø±Ø¨Ø© ØªØ³ÙˆÙ‚ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø¹ Ø¢Ù„Ø§Ù Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù…Ù† ØªØ¬Ø§Ø± Ù…ÙˆØ«ÙˆÙ‚ÙŠÙ†</p>
					<div class="slide-illustration">
						<div class="illustration-box">
							<span class="illust-icon">ğŸ“±</span>
							<span class="illust-icon">ğŸ‘•</span>
							<span class="illust-icon">ğŸ“š</span>
						</div>
					</div>
				</div>
			}
			else if (currentSlide == 1)
			{
				<div class="slide slide-2">
					<div class="slide-icon">ğŸ¯</div>
					<h1>ØªØ³ÙˆÙ‚ Ø¨Ø°ÙƒØ§Ø¡</h1>
					<p>Ø¨Ø­Ø« Ù…ØªÙ‚Ø¯Ù… ÙˆÙÙ„Ø§ØªØ± Ø°ÙƒÙŠØ© Ù„Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ø§ ØªØ±ÙŠØ¯ Ø¨Ø³Ø±Ø¹Ø©</p>
					<div class="slide-illustration">
						<div class="search-demo">
							<div class="demo-search-bar">ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ø£ÙŠ Ø´ÙŠØ¡...</div>
							<div class="demo-filters">
								<span class="demo-filter">ğŸ“¦ Ø§Ù„ÙØ¦Ø§Øª</span>
								<span class="demo-filter">ğŸ’° Ø§Ù„Ø³Ø¹Ø±</span>
								<span class="demo-filter">â­ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</span>
							</div>
						</div>
					</div>
				</div>
			}
			else if (currentSlide == 2)
			{
				<div class="slide slide-3">
					<div class="slide-icon">ğŸš€</div>
					<h1>Ø´Ø­Ù† Ø³Ø±ÙŠØ¹ ÙˆØ¢Ù…Ù†</h1>
					<p>ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ù…Ø¹ Ø¥Ù…ÙƒØ§Ù†ÙŠØ© ØªØªØ¨Ø¹ Ø´Ø­Ù†ØªÙƒ Ù„Ø­Ø¸Ø© Ø¨Ù„Ø­Ø¸Ø©</p>
					<div class="slide-illustration">
						<div class="shipping-demo">
							<div class="truck-icon">ğŸšš</div>
							<div class="tracking-steps">
								<span class="step done">âœ“ ØªÙ… Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</span>
								<span class="step done">âœ“ Ù‚ÙŠØ¯ Ø§Ù„Ø´Ø­Ù†</span>
								<span class="step current">ğŸ“ ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚</span>
								<span class="step">â³ Ø§Ù„ØªØ³Ù„ÙŠÙ…</span>
							</div>
						</div>
					</div>
				</div>
			}
			else if (currentSlide == 3)
			{
				<div class="slide slide-4">
					<div class="slide-icon">ğŸ’³</div>
					<h1>Ø¯ÙØ¹ Ø¢Ù…Ù† ÙˆÙ…ØªÙ†ÙˆØ¹</h1>
					<p>Ø§Ø¯ÙØ¹ Ø¨Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªÙŠ ØªÙ†Ø§Ø³Ø¨Ùƒ: Ù…Ø¯Ù‰ØŒ ÙÙŠØ²Ø§ØŒ Ù…Ø§Ø³ØªØ±ÙƒØ§Ø±Ø¯ØŒ Apple Pay</p>
					<div class="slide-illustration">
						<div class="payment-methods">
							<span class="payment-icon">ğŸ’³</span>
							<span class="payment-icon">ğŸ“±</span>
							<span class="payment-icon">ğŸ</span>
							<span class="payment-icon">ğŸ”’</span>
						</div>
					</div>
				</div>
			}
			else if (currentSlide == 4)
			{
				<div class="slide slide-5">
					<div class="slide-icon">âœ¨</div>
					<h1>Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ³ÙˆÙ‚ Ø§Ù„Ø¢Ù†!</h1>
					<p>Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¨Ø¯Ø¡ØŸ Ø³Ø¬Ù‘Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£Ùˆ Ø£Ù†Ø´Ø¦ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</p>
					<div class="final-actions">
						<SfButton IsPrimary="true"
								  CssClass="action-btn"
								  OnClick="GoToRegister">
							Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯
						</SfButton>
						<SfButton CssClass="action-btn secondary"
								  OnClick="GoToLogin">
							Ù„Ø¯ÙŠ Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù„ÙØ¹Ù„
						</SfButton>
						<SfButton CssClass="skip-btn"
								  OnClick="SkipOnboarding">
							ØªØ®Ø·ÙŠ ÙˆØ§Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø± ÙƒØ¶ÙŠÙ
						</SfButton>
					</div>
				</div>
			}
		</div>

		<!-- Navigation -->
		<div class="onboarding-nav">
			@if (currentSlide > 0)
			{
				<SfButton CssClass="nav-btn prev-btn" OnClick="PreviousSlide">
					â† Ø§Ù„Ø³Ø§Ø¨Ù‚
				</SfButton>
			}
			else
			{
				<div></div>
			}

			@if (currentSlide < slides.Count - 1)
			{
				<SfButton IsPrimary="true" CssClass="nav-btn next-btn" OnClick="NextSlide">
					Ø§Ù„ØªØ§Ù„ÙŠ â†’
				</SfButton>
			}
			else
			{
				<div></div>
			}
		</div>

		<!-- Skip Button (except last slide) -->
		@if (currentSlide < slides.Count - 1)
		{
			<div class="skip-container">
				<SfButton CssClass="skip-btn" OnClick="SkipOnboarding">
					ØªØ®Ø·ÙŠ
				</SfButton>
			</div>
		}
	</div>
</div>

@code {
	private int currentSlide = 0;
	private List<string> slides = new() { "welcome", "search", "shipping", "payment", "start" };

	private void NextSlide()
	{
		if (currentSlide < slides.Count - 1)
		{
			currentSlide++;
		}
	}

	private void PreviousSlide()
	{
		if (currentSlide > 0)
		{
			currentSlide--;
		}
	}

	private void GoToSlide(int index)
	{
		if (index >= 0 && index < slides.Count)
		{
			currentSlide = index;
		}
	}

	private async Task SkipOnboarding()
	{
		// Mark onboarding as completed
		await JS.InvokeVoidAsync("localStorage.setItem", "onboarding_completed", "true");
		Navigation.NavigateTo("/");
	}

	private async Task GoToRegister()
	{
		await JS.InvokeVoidAsync("localStorage.setItem", "onboarding_completed", "true");
		Navigation.NavigateTo("/register");
	}

	private async Task GoToLogin()
	{
		await JS.InvokeVoidAsync("localStorage.setItem", "onboarding_completed", "true");
		Navigation.NavigateTo("/login");
	}
}

<style>
	.onboarding-page {
		height: 100vh;
		display: flex;
		align-items: center;
		justify-content: center;
		background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
		color: white;
	}

	.onboarding-container {
		width: 100%;
		max-width: 800px;
		padding: var(--spacing-xl);
		position: relative;
	}

	/* Progress Dots */
	.progress-dots {
		display: flex;
		justify-content: center;
		gap: var(--spacing-sm);
		margin-bottom: var(--spacing-xl);
	}

	.dot {
		width: 12px;
		height: 12px;
		border-radius: 50%;
		background: rgba(255, 255, 255, 0.3);
		cursor: pointer;
		transition: all 0.3s;
	}

	.dot.active {
		background: white;
		width: 32px;
		border-radius: 6px;
	}

	/* Slides */
	.slides-container {
		min-height: 500px;
		display: flex;
		align-items: center;
		justify-content: center;
	}

	.slide {
		text-align: center;
		animation: slideIn 0.5s ease-out;
	}

	@@keyframes slideIn {
		from {
			opacity: 0;
			transform: translateX(30px);
		}
		to {
			opacity: 1;
			transform: translateX(0);
		}
	}

	.slide-icon {
		font-size: 80px;
		margin-bottom: var(--spacing-lg);
	}

	.slide h1 {
		font-size: 36px;
		margin-bottom: var(--spacing-md);
		font-weight: 700;
	}

	.slide p {
		font-size: 18px;
		margin-bottom: var(--spacing-xl);
		opacity: 0.9;
		max-width: 600px;
		margin-left: auto;
		margin-right: auto;
	}

	/* Illustrations */
	.slide-illustration {
		margin-top: var(--spacing-xl);
	}

	.illustration-box {
		display: flex;
		justify-content: center;
		gap: var(--spacing-xl);
		font-size: 64px;
	}

	.illust-icon {
		animation: float 3s ease-in-out infinite;
	}

	.illust-icon:nth-child(2) {
		animation-delay: 0.5s;
	}

	.illust-icon:nth-child(3) {
		animation-delay: 1s;
	}

	@@keyframes float {
		0%, 100% { transform: translateY(0); }
		50% { transform: translateY(-20px); }
	}

	/* Search Demo */
	.search-demo {
		display: flex;
		flex-direction: column;
		gap: var(--spacing-md);
		max-width: 400px;
		margin: 0 auto;
	}

	.demo-search-bar {
		padding: var(--spacing-md);
		background: rgba(255, 255, 255, 0.2);
		border-radius: var(--border-radius);
		text-align: right;
	}

	.demo-filters {
		display: flex;
		gap: var(--spacing-sm);
		justify-content: center;
	}

	.demo-filter {
		padding: var(--spacing-xs) var(--spacing-md);
		background: rgba(255, 255, 255, 0.2);
		border-radius: 20px;
		font-size: var(--font-size-sm);
	}

	/* Shipping Demo */
	.shipping-demo {
		max-width: 500px;
		margin: 0 auto;
	}

	.truck-icon {
		font-size: 64px;
		margin-bottom: var(--spacing-lg);
	}

	.tracking-steps {
		display: flex;
		flex-direction: column;
		gap: var(--spacing-sm);
		text-align: right;
	}

	.step {
		padding: var(--spacing-sm) var(--spacing-md);
		background: rgba(255, 255, 255, 0.1);
		border-radius: var(--border-radius);
		font-size: var(--font-size-sm);
	}

	.step.done {
		background: rgba(16, 185, 129, 0.3);
	}

	.step.current {
		background: rgba(255, 255, 255, 0.3);
		font-weight: 600;
	}

	/* Payment Methods */
	.payment-methods {
		display: flex;
		justify-content: center;
		gap: var(--spacing-xl);
		font-size: 64px;
	}

	/* Final Actions */
	.final-actions {
		display: flex;
		flex-direction: column;
		gap: var(--spacing-md);
		max-width: 400px;
		margin: 0 auto;
	}

	.action-btn {
		width: 100%;
		padding: var(--spacing-md);
		font-size: 18px;
		font-weight: 600;
	}

	.action-btn.secondary {
		background: rgba(255, 255, 255, 0.2);
		border: 2px solid white;
	}

	/* Navigation */
	.onboarding-nav {
		display: flex;
		justify-content: space-between;
		margin-top: var(--spacing-xl);
	}

	.nav-btn {
		padding: var(--spacing-sm) var(--spacing-lg);
		background: rgba(255, 255, 255, 0.2);
		color: white;
		border: 1px solid rgba(255, 255, 255, 0.3);
	}

	.nav-btn:hover {
		background: rgba(255, 255, 255, 0.3);
	}

	.skip-container {
		text-align: center;
		margin-top: var(--spacing-lg);
	}

	.skip-btn {
		background: transparent;
		color: white;
		opacity: 0.7;
	}

	.skip-btn:hover {
		opacity: 1;
	}
</style>
