@inject ThemeService ThemeService
@implements IDisposable

<SfButton IconCss="@GetThemeIcon()"
		  CssClass="theme-toggle-btn"
		  OnClick="ToggleTheme"
		  Title="@GetThemeTooltip()">
</SfButton>

@code {
	private string currentTheme = "light";

	protected override void OnInitialized()
	{
		currentTheme = ThemeService.CurrentTheme;
		ThemeService.OnThemeChanged += OnThemeChanged;
	}

	private void OnThemeChanged()
	{
		currentTheme = ThemeService.CurrentTheme;
		StateHasChanged();
	}

	private void ToggleTheme()
	{
		ThemeService.ToggleTheme();
	}

	private string GetThemeIcon()
	{
		return currentTheme == "light" ? "e-icons e-moon" : "e-icons e-sun";
	}

	private string GetThemeTooltip()
	{
		return currentTheme == "light" ? "الوضع الداكن" : "الوضع الفاتح";
	}

	public void Dispose()
	{
		ThemeService.OnThemeChanged -= OnThemeChanged;
	}
}

<style>
	.theme-toggle-btn {
		border-radius: 50%;
		width: 40px;
		height: 40px;
		display: flex;
		align-items: center;
		justify-content: center;
	}
</style>
