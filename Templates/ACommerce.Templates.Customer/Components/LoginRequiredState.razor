@namespace ACommerce.Templates.Customer.Components
@inject IAppNavigationService Navigation
@inject ILocalizationService L

<div class="login-required-state @Class">
    <div class="login-required-content">
        @if (!string.IsNullOrEmpty(Icon))
        {
            <div class="login-required-icon">
                <i class="bi @Icon"></i>
            </div>
        }

        <h3 class="login-required-title">@(Title ?? L["LoginRequired"])</h3>

        @if (!string.IsNullOrEmpty(Description))
        {
            <p class="login-required-description">@Description</p>
        }
        else
        {
            <p class="login-required-description">@L["LoginRequiredDescription"]</p>
        }

        <button class="ac-btn ac-btn-primary login-required-btn" @onclick="GoToLogin">
            <i class="bi bi-box-arrow-in-right"></i>
            @L["Login"]
        </button>
    </div>
</div>

@code {
    [Parameter] public string? Icon { get; set; }
    [Parameter] public string? Title { get; set; }
    [Parameter] public string? Description { get; set; }
    [Parameter] public string? Class { get; set; }
    [Parameter] public string ReturnUrl { get; set; } = "/";

    private void GoToLogin()
    {
        Navigation.NavigateTo($"/login?returnUrl={Uri.EscapeDataString(ReturnUrl)}");
    }
}
