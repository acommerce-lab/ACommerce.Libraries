@namespace ACommerce.Templates.Customer.Components

<span class="ac-badge @CssClass" @attributes="AdditionalAttributes">
    @if (!string.IsNullOrEmpty(Icon))
    {
        <i class="@Icon"></i>
    }
    @if (ChildContent != null)
    {
        @ChildContent
    }
    else if (!string.IsNullOrEmpty(Text))
    {
        @Text
    }
    else if (Count.HasValue)
    {
        @(Count > MaxCount ? $"{MaxCount}+" : Count.ToString())
    }
</span>

@code {
    [Parameter] public RenderFragment? ChildContent { get; set; }
    [Parameter] public string? Text { get; set; }
    [Parameter] public int? Count { get; set; }
    [Parameter] public int MaxCount { get; set; } = 99;
    [Parameter] public string? Icon { get; set; }
    [Parameter] public BadgeVariant Variant { get; set; } = BadgeVariant.Primary;
    [Parameter] public BadgeSize Size { get; set; } = BadgeSize.Medium;
    [Parameter] public bool Pill { get; set; } = true;
    [Parameter] public bool Dot { get; set; }
    [Parameter] public string? Class { get; set; }
    [Parameter(CaptureUnmatchedValues = true)]
    public Dictionary<string, object>? AdditionalAttributes { get; set; }

    private string CssClass
    {
        get
        {
            var classes = new List<string> { $"ac-badge-{Variant.ToString().ToLower()}" };

            if (Size != BadgeSize.Medium)
            {
                classes.Add($"ac-badge-{Size.ToString().ToLower()}");
            }

            if (Pill) classes.Add("ac-badge-pill");
            if (Dot) classes.Add("ac-badge-dot");
            if (!string.IsNullOrEmpty(Class)) classes.Add(Class);

            return string.Join(" ", classes);
        }
    }
}
