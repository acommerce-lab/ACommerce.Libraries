using ACommerce.Chats.Abstractions.DTOs;

namespace ACommerce.Chats.Abstractions.Providers;

/// <summary>
/// ???? ????? ??????? ??????? (Real-time)
/// ?????? SharedKernel.Realtime ?? ??????? ??????
/// </summary>
public interface IRealtimeChatProvider
{
	/// <summary>
	/// ????? ????? ????? ???????
	/// </summary>
	Task SendMessageToChat(
		Guid chatId,
		MessageDto message,
		CancellationToken cancellationToken = default);

	/// <summary>
	/// ????? ???? ???????
	/// </summary>
	Task SendTypingIndicator(
		Guid chatId,
		TypingIndicatorDto indicator,
		CancellationToken cancellationToken = default);

	/// <summary>
	/// ????? ????? ????? ????
	/// </summary>
	Task SendParticipantJoined(
		Guid chatId,
		ParticipantDto participant,
		CancellationToken cancellationToken = default);

	/// <summary>
	/// ????? ????? ?????? ?????
	/// </summary>
	Task SendParticipantLeft(
		Guid chatId,
		string userId,
		CancellationToken cancellationToken = default);

	/// <summary>
	/// ????? ????? ????? ???? ???????? (Online/Offline)
	/// </summary>
	Task SendUserPresenceUpdate(
		string userId,
		bool isOnline,
		CancellationToken cancellationToken = default);

	/// <summary>
	/// ????? ????? ????? ?????
	/// </summary>
	Task SendMessageRead(
		Guid chatId,
		string userId,
		Guid messageId,
		CancellationToken cancellationToken = default);
}

